<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Practical Python | Nicholas Sager </title> <meta name="author" content="Nicholas Sager"> <meta name="description" content="Programming fundamentals"> <meta name="keywords" content="data-science, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://nicksager.github.io/projects/practical-python/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Nicholas</span> Sager </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus </a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item " href="/publications/">publications</a> <div class="dropdown-divider"></div> <a class="dropdown-item " href="/projects/">projects</a> </div> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Practical Python</h1> <p class="post-description">Programming fundamentals</p> </header> <article> <style>.image-container{height:500px;border-radius:.25rem;background-position:center center;background-size:cover;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14),0 3px 1px -2px rgba(0,0,0,0.12),0 1px 5px 0 rgba(0,0,0,0.2)}</style> <div class="row justify-content-sm-center"> <div class="col-sm-8 mt-3 mt-md-0"> <p> I completed this course because I wanted to do a structured introduction to Python. As part of my schoolwork, we were using Python for machine learning, but I kept finding myself wanting to do more with it and learning one small bit at a time. I learned Java as an undergrad, and have done a lot of work in R, but I needed to formally brush up on object-oriented programming. Python's quick and scripty nature also appealed to me so I chose to learn more about the language. </p> <p> <a href="https://dabeaz.com" rel="external nofollow noopener" target="_blank">David Beazley</a>'s python courses stood out to me when looking for resources, and came highly recommended. This course, <a href="https://dabeaz-course.github.io/practical-python" rel="external nofollow noopener" target="_blank">Practical Python</a>, is meant to be taught in person over a week and consists of about 130 exercises. The author has made the course available <a href="https://github.com/dabeaz-course/practical-python" rel="external nofollow noopener" target="_blank">here</a> under the Creative Commons license. It focuses on script writing, data manipulation, and program organization. I liked that course focused on basic python functionality and didn't require any external libraries. Mastering the basics is the best way to proficiency in anything. </p> <p> Some of the exercises I completed for the course are shown below. Most were iterative and the concepts built on each other, so the versions shown below represent the final iteration of the code. To get the most out of this course, I completed these exercises without Copilot or help from LLM's. </p> </div> <div class="col-sm-4 mt-3 mt-md-0"> <div class="image-container" style="background-image: url('/assets/img/pr-python.png');"></div> </div> </div> <div class="caption"> All of my work from this course can be found in the <a href="https://github.com/NickSager/practical-python/tree/master/Work/porty-app/porty" rel="external nofollow noopener" target="_blank">practical-python</a> repository on my GitHub. </div> <h3 id="reading-data">Reading Data</h3> <p>In this exercise, I created a script that would parse a CSV file and return a list of records. The script is flexible and can take a file object or a list of strings as input. It can also take a list of column names to select, a list of types to convert the data to, and a delimiter. It also has the ability to skip rows with no data and to silence errors. This exercise was interesting because the options necessitate some complex control logic, and it required logging and error handling. Something like <code class="language-plaintext highlighter-rouge">pandas</code> would be a better choice for this task, but it was fun to learn how to do it using just basic python.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1"># fileparse.py
#
# Exercise 8.2
</span><span class="kn">import</span> <span class="n">csv</span>
<span class="kn">import</span> <span class="n">logging</span>
<span class="n">log</span> <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="nf">getLogger</span><span class="p">(</span><span class="n">__name__</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">parse_csv</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">has_headers</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">delimiter</span><span class="o">=</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="p">,</span> <span class="n">silence_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Parses lines from a CSV file into a list of records
    Takes only lines from a file - allows flexibility of opening differently
    Typical usage:
        with open(</span><span class="sh">'</span><span class="s">file.csv</span><span class="sh">'</span><span class="s">) as f:
            x = parse_csv(f)
    Note: types needs to match select or row in length
        Implement error handling here later
    </span><span class="sh">'''</span>
    <span class="k">if</span> <span class="n">select</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">has_headers</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nc">RuntimeError</span><span class="p">(</span><span class="sh">'</span><span class="s">Select argument requires column headers</span><span class="sh">'</span><span class="p">)</span>

    <span class="n">rows</span> <span class="o">=</span> <span class="n">csv</span><span class="p">.</span><span class="nf">reader</span><span class="p">(</span><span class="n">lines</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">)</span>

    <span class="c1"># Read the file headers
</span>    <span class="n">headers</span> <span class="o">=</span> <span class="nf">next</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span> <span class="k">if</span> <span class="n">has_headers</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="n">select</span><span class="p">:</span>
        <span class="n">indices</span> <span class="o">=</span> <span class="p">[</span><span class="n">headers</span><span class="p">.</span><span class="nf">index</span><span class="p">(</span><span class="n">colname</span><span class="p">)</span> <span class="k">for</span> <span class="n">colname</span> <span class="ow">in</span> <span class="n">select</span><span class="p">]</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="n">select</span>

    <span class="n">records</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">rowno</span><span class="p">,</span> <span class="n">row</span> <span class="ow">in</span> <span class="nf">enumerate</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="mi">1</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="p">:</span>  <span class="c1"># Skip rows with no data "Truthiness"
</span>            <span class="k">continue</span>

        <span class="k">if</span> <span class="n">select</span><span class="p">:</span>
            <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="n">row</span><span class="p">[</span><span class="n">index</span><span class="p">]</span> <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">indices</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">types</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span> <span class="o">=</span> <span class="p">[</span><span class="nf">func</span><span class="p">(</span><span class="n">val</span><span class="p">)</span> <span class="k">for</span> <span class="n">func</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="nf">zip</span><span class="p">(</span><span class="n">types</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
            <span class="k">except</span> <span class="nb">ValueError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">silence_errors</span><span class="p">:</span>
                    <span class="n">log</span><span class="p">.</span><span class="nf">warning</span><span class="p">(</span><span class="sh">"</span><span class="s">Row %d: Couldn</span><span class="sh">'</span><span class="s">t convert %s</span><span class="sh">"</span><span class="p">,</span> <span class="n">rowno</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
                    <span class="n">log</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="sh">"</span><span class="s">Row %d: Reason %s</span><span class="sh">"</span><span class="p">,</span> <span class="n">rowno</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
                    <span class="c1"># print(f"Row {rowno}: Couldn't convert {row}")
</span>                    <span class="c1"># print(f"Row {rowno}: Reason {e}")
</span>                    <span class="k">continue</span>

        <span class="k">if</span> <span class="n">has_headers</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">(</span><span class="nf">zip</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">row</span><span class="p">))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">record</span> <span class="o">=</span> <span class="nf">tuple</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
        <span class="n">records</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">record</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">records</span>
</code></pre></div></div> <h3 id="printing-a-report">Printing a Report</h3> <p>This exercise was about creating a report from a list of portfolio holdings. The script takes a portfolio and a list of prices and creates a report. It can output the results in a variety of formats, including text, csv, and html. It makes use of a number of other modules I built throughout the course, and got updated as the course introduced new topics. See <code class="language-plaintext highlighter-rouge">tableformat.py</code> for how the different formats are handled.</p> <p>Here is a sample of the output in text format:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>      Name     Shares      Price     Change 
---------- ---------- ---------- ---------- 
        AA        100       9.22     -22.98 
       IBM         50     106.28      15.18 
       CAT        150      35.46     -47.98 
      MSFT        200      20.89     -30.34 
        GE         95      13.48     -26.89 
      MSFT         50      20.89     -44.21 
       IBM        100     106.28      35.84 
---------- ---------- ---------- ---------- 
                           Value $ 28,686.10
                      Net Change $-15,985.05
</code></pre></div></div> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
# report.py
#
# Exercise 7.4
</span><span class="kn">from</span> <span class="n">.</span> <span class="kn">import</span> <span class="n">fileparse</span>
<span class="kn">from</span> <span class="n">.stock</span> <span class="kn">import</span> <span class="n">Stock</span>
<span class="kn">from</span> <span class="n">.portfolio</span> <span class="kn">import</span> <span class="n">Portfolio</span>
<span class="kn">from</span> <span class="n">.</span> <span class="kn">import</span> <span class="n">tableformat</span>


<span class="k">def</span> <span class="nf">read_portfolio</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">opts</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Read a stock portfolio file into a list of dictionaries with items
    name, shares, and price.
    </span><span class="sh">'''</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="n">portfolio</span> <span class="o">=</span> <span class="n">Portfolio</span><span class="p">.</span><span class="nf">from_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">portfolio</span>


<span class="k">def</span> <span class="nf">read_prices</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span> <span class="n">has_headers</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
                <span class="n">delimiter</span><span class="o">=</span><span class="sh">'</span><span class="s">,</span><span class="sh">'</span><span class="p">,</span> <span class="n">silence_errors</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Read a CSV file of price data into a dict mapping names to prices.
    </span><span class="sh">'''</span>
    <span class="k">with</span> <span class="nf">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="nb">file</span><span class="p">:</span>
        <span class="n">prices</span> <span class="o">=</span> <span class="n">fileparse</span><span class="p">.</span><span class="nf">parse_csv</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">select</span><span class="o">=</span><span class="n">select</span><span class="p">,</span> <span class="n">types</span><span class="o">=</span><span class="n">types</span><span class="p">,</span>
                                     <span class="n">has_headers</span><span class="o">=</span><span class="n">has_headers</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="n">delimiter</span><span class="p">,</span>
                                     <span class="n">silence_errors</span><span class="o">=</span><span class="n">silence_errors</span><span class="p">)</span>
    <span class="n">prices</span> <span class="o">=</span> <span class="nf">dict</span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>
    <span class="nf">return </span><span class="p">(</span><span class="n">prices</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">make_report_data</span><span class="p">(</span><span class="n">portfolio</span><span class="p">,</span> <span class="n">prices</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Create a report from a list of portfolio holdings.
    </span><span class="sh">'''</span>
    <span class="n">report</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">holding</span> <span class="ow">in</span> <span class="n">portfolio</span><span class="p">:</span>
        <span class="n">current_price</span> <span class="o">=</span> <span class="n">prices</span><span class="p">[</span><span class="n">holding</span><span class="p">.</span><span class="n">name</span><span class="p">]</span>
        <span class="n">change</span> <span class="o">=</span> <span class="n">current_price</span> <span class="o">-</span> <span class="n">holding</span><span class="p">.</span><span class="n">price</span>
        <span class="n">summary</span> <span class="o">=</span> <span class="p">(</span><span class="n">holding</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">holding</span><span class="p">.</span><span class="n">shares</span><span class="p">,</span> <span class="n">current_price</span><span class="p">,</span> <span class="n">change</span><span class="p">)</span>
        <span class="n">report</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">summary</span><span class="p">)</span>
    <span class="nf">return </span><span class="p">(</span><span class="n">report</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">print_report</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="n">formatter</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Print a nicely formated table from a list of (name, shares, price, change)
    takes a report object, portfolio, and prices.
    </span><span class="sh">'''</span>

    <span class="n">current_value</span> <span class="o">=</span> <span class="mf">0.0</span>  <span class="c1"># Can do here, or loop again in footer
</span>    <span class="n">net_change</span> <span class="o">=</span> <span class="mf">0.0</span>

    <span class="c1"># Header
</span>    <span class="n">formatter</span><span class="p">.</span><span class="nf">headings</span><span class="p">([</span><span class="sh">'</span><span class="s">Name</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Shares</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Price</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Change</span><span class="sh">'</span><span class="p">])</span>

    <span class="c1"># Table Body
</span>    <span class="k">for</span> <span class="n">name</span><span class="p">,</span> <span class="n">shares</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">change</span> <span class="ow">in</span> <span class="n">report</span><span class="p">:</span>
        <span class="n">rowdata</span> <span class="o">=</span> <span class="p">[</span><span class="n">name</span><span class="p">,</span> <span class="nf">str</span><span class="p">(</span><span class="n">shares</span><span class="p">),</span> <span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">price</span><span class="si">:</span><span class="mf">0.2</span><span class="n">f</span><span class="si">}</span><span class="sh">'</span><span class="p">,</span> <span class="sa">f</span><span class="sh">'</span><span class="si">{</span><span class="n">change</span><span class="si">:</span><span class="mf">0.2</span><span class="n">f</span><span class="si">}</span><span class="sh">'</span><span class="p">]</span>
        <span class="n">formatter</span><span class="p">.</span><span class="nf">row</span><span class="p">(</span><span class="n">rowdata</span><span class="p">)</span>
        <span class="c1"># Iterate here or loop again in footer
</span>        <span class="n">current_value</span> <span class="o">+=</span> <span class="n">shares</span><span class="o">*</span><span class="n">price</span>
        <span class="n">net_change</span> <span class="o">+=</span> <span class="n">shares</span><span class="o">*</span><span class="n">change</span>

    <span class="c1"># Separator and Footer
</span>    <span class="n">footer</span> <span class="o">=</span> <span class="p">{</span><span class="sh">'</span><span class="s">Value</span><span class="sh">'</span><span class="p">:</span> <span class="n">current_value</span><span class="p">,</span> <span class="sh">'</span><span class="s">Net Change</span><span class="sh">'</span><span class="p">:</span> <span class="n">net_change</span><span class="p">}</span>
    <span class="n">formatter</span><span class="p">.</span><span class="nf">footer</span><span class="p">(</span><span class="n">footer</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">portfolio_report</span><span class="p">(</span><span class="n">portfoliofile</span><span class="p">,</span> <span class="n">pricefile</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="sh">'</span><span class="s">txt</span><span class="sh">'</span><span class="p">):</span>
    <span class="sh">'''</span><span class="s">
    Make a stock report given portfolio and price data files.
    fmt = </span><span class="sh">'</span><span class="s">txt</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">csv</span><span class="sh">'</span><span class="s">, </span><span class="sh">'</span><span class="s">html</span><span class="sh">'</span><span class="s">
    </span><span class="sh">'''</span>
    <span class="c1"># Read data files
</span>    <span class="n">portfolio</span> <span class="o">=</span> <span class="nf">read_portfolio</span><span class="p">(</span><span class="n">portfoliofile</span><span class="p">)</span>
    <span class="n">prices</span> <span class="o">=</span> <span class="nf">read_prices</span><span class="p">(</span><span class="n">pricefile</span><span class="p">)</span>

    <span class="c1"># Create the report Data
</span>    <span class="n">report</span> <span class="o">=</span> <span class="nf">make_report_data</span><span class="p">(</span><span class="n">portfolio</span><span class="p">,</span> <span class="n">prices</span><span class="p">)</span>

    <span class="c1"># Print the report
</span>    <span class="n">formatter</span> <span class="o">=</span> <span class="n">tableformat</span><span class="p">.</span><span class="nf">create_formatter</span><span class="p">(</span><span class="n">fmt</span><span class="p">)</span>
    <span class="nf">print_report</span><span class="p">(</span><span class="n">report</span><span class="p">,</span> <span class="n">formatter</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">main</span><span class="p">(</span><span class="n">argv</span><span class="p">):</span>
    <span class="c1"># Default values for arguments
</span>    <span class="n">default_portfoliofile</span> <span class="o">=</span> <span class="sh">'</span><span class="s">./portfolio.csv</span><span class="sh">'</span>
    <span class="n">default_pricefile</span> <span class="o">=</span> <span class="sh">'</span><span class="s">./prices.csv</span><span class="sh">'</span>
    <span class="n">default_fmt</span> <span class="o">=</span> <span class="sh">'</span><span class="s">txt</span><span class="sh">'</span>

    <span class="c1"># Use the default arguments if not provided
</span>    <span class="n">portfoliofile</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">1</span> <span class="k">else</span> <span class="n">default_portfoliofile</span>
    <span class="n">pricefile</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="k">else</span> <span class="n">default_pricefile</span>
    <span class="n">fmt</span> <span class="o">=</span> <span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="k">if</span> <span class="nf">len</span><span class="p">(</span><span class="n">argv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span> <span class="k">else</span> <span class="n">default_fmt</span>

    <span class="c1"># Now call the ticker function with the arguments
</span>    <span class="nf">portfolio_report</span><span class="p">(</span><span class="n">portfoliofile</span><span class="p">,</span> <span class="n">pricefile</span><span class="p">,</span> <span class="n">fmt</span><span class="p">)</span>

    <span class="c1"># Old way
</span>    <span class="c1"># if len(argv) == 4:
</span>    <span class="c1">#     portfolio_report(argv[1], argv[2], argv[3])
</span>    <span class="c1"># elif len(argv) == 3:
</span>    <span class="c1">#     portfolio_report(argv[1], argv[2])
</span>    <span class="c1"># else:
</span>    <span class="c1">#     raise SystemExit('Usage: %s portfile pricefile format' % argv[0])
</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="sh">"</span><span class="s">__main__</span><span class="sh">"</span><span class="p">:</span>
    <span class="kn">import</span> <span class="n">sys</span>
    <span class="c1"># This file sets up basic configuration of the logging module.
</span>    <span class="c1"># Change settings here to adjust logging output as needed.
</span>    <span class="kn">import</span> <span class="n">logging</span>
    <span class="n">logging</span><span class="p">.</span><span class="nf">basicConfig</span><span class="p">(</span>
        <span class="c1"># filename = 'app.log',            # Name of the log file (omit to use stderr)
</span>        <span class="c1"># filemode = 'w',                  # File mode (use 'a' to append)
</span>        <span class="n">level</span>    <span class="o">=</span> <span class="n">logging</span><span class="p">.</span><span class="n">WARNING</span><span class="p">,</span>      <span class="c1"># Logging level (DEBUG, INFO, WARNING, ERROR, or CRITICAL)
</span>    <span class="p">)</span>
    <span class="nf">main</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span>
</code></pre></div></div> <h3 id="miscellaneous">Miscellaneous</h3> <p>The course also included a number of other exercises that I found interesting. For example, we packaged all of the stock portfolio related code into a package and learned how to use <code class="language-plaintext highlighter-rouge">setup.py</code> to install or distribute it. The section on generators was really interesting and I plan to revisit that topic. I learned about decorators and in the example below, used them to create typed properties that could be used in the other modules.</p> <p>Overall, I found this course to be a great introduction to Python. I’ve been surprised at how useful these basic skills have been in other projects, and I’m glad I spent the time to learn them.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">#!/usr/bin/env python3
# typedproperty.py
#
# Exercise 7.7
</span>
<span class="k">def</span> <span class="nf">typedproperty</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">expected_type</span><span class="p">):</span>
    <span class="n">private_name</span> <span class="o">=</span> <span class="sh">'</span><span class="s">_</span><span class="sh">'</span> <span class="o">+</span> <span class="n">name</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="n">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="nf">getattr</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">private_name</span><span class="p">)</span>

    <span class="nd">@prop.setter</span>
    <span class="k">def</span> <span class="nf">prop</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nf">isinstance</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">expected_type</span><span class="p">):</span>
            <span class="k">raise</span> <span class="nc">TypeError</span><span class="p">(</span><span class="sa">f</span><span class="sh">'</span><span class="s">Expected </span><span class="si">{</span><span class="n">expected_type</span><span class="si">}</span><span class="sh">'</span><span class="p">)</span>
        <span class="nf">setattr</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="n">private_name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">prop</span>

<span class="c1"># With Lambda Functions:
# String = lambda name: typedproperty(name, str)
# Integer = lambda name: typedproperty(name, int)
# Float = lambda name: typedproperty(name, float)
</span>
<span class="c1"># With short definitions (lambda discouraged by linter)
</span><span class="k">def</span> <span class="nf">String</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> <span class="k">return</span> <span class="nf">typedproperty</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">Integer</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> <span class="k">return</span> <span class="nf">typedproperty</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">Float</span><span class="p">(</span><span class="n">name</span><span class="p">):</span> <span class="k">return</span> <span class="nf">typedproperty</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">float</span><span class="p">)</span>

</code></pre></div></div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Nicholas Sager. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. Photos from <a href="https://unsplash.com" target="_blank" rel="external nofollow noopener">Unsplash</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?a3446f084dcaecc5f75aa1757d087dcf"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-projects",title:"projects",description:"Selected data science and machine learning projects.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"dropdown-publications",title:"publications",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"dropdown-projects",title:"projects",description:"",section:"Dropdown",handler:()=>{window.location.href=""}},{id:"post-a-post-with-tabs",title:"a post with tabs",description:"this is what included tabs in a post could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/tabs/"}},{id:"post-a-post-with-typograms",title:"a post with typograms",description:"this is what included typograms code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/typograms/"}},{id:"post-a-post-that-can-be-cited",title:"a post that can be cited",description:"this is what a post that can be cited looks like",section:"Posts",handler:()=>{window.location.href="/blog/2024/post-citation/"}},{id:"post-a-post-with-pseudo-code",title:"a post with pseudo code",description:"this is what included pseudo code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/pseudocode/"}},{id:"post-a-post-with-code-diff",title:"a post with code diff",description:"this is how you can display code diffs",section:"Posts",handler:()=>{window.location.href="/blog/2024/code-diff/"}},{id:"post-a-post-with-advanced-image-components",title:"a post with advanced image components",description:"this is what advanced image components could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/advanced-images/"}},{id:"post-a-post-with-vega-lite",title:"a post with vega lite",description:"this is what included vega lite code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/vega-lite/"}},{id:"post-a-post-with-geojson",title:"a post with geojson",description:"this is what included geojson code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/geojson-map/"}},{id:"post-a-post-with-echarts",title:"a post with echarts",description:"this is what included echarts code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/echarts/"}},{id:"post-a-post-with-chart-js",title:"a post with chart.js",description:"this is what included chart.js code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2024/chartjs/"}},{id:"post-a-post-with-tikzjax",title:"a post with TikZJax",description:"this is what included TikZ code could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/tikzjax/"}},{id:"post-a-post-with-bibliography",title:"a post with bibliography",description:"an example of a blog post with bibliography",section:"Posts",handler:()=>{window.location.href="/blog/2023/post-bibliography/"}},{id:"post-a-post-with-jupyter-notebook",title:"a post with jupyter notebook",description:"an example of a blog post with jupyter notebook",section:"Posts",handler:()=>{window.location.href="/blog/2023/jupyter-notebook/"}},{id:"post-a-post-with-custom-blockquotes",title:"a post with custom blockquotes",description:"an example of a blog post with custom blockquotes",section:"Posts",handler:()=>{window.location.href="/blog/2023/custom-blockquotes/"}},{id:"post-a-post-with-table-of-contents-on-a-sidebar",title:"a post with table of contents on a sidebar",description:"an example of a blog post with table of contents on a sidebar",section:"Posts",handler:()=>{window.location.href="/blog/2023/sidebar-table-of-contents/"}},{id:"post-a-post-with-audios",title:"a post with audios",description:"this is what included audios could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/audios/"}},{id:"post-a-post-with-videos",title:"a post with videos",description:"this is what included videos could look like",section:"Posts",handler:()=>{window.location.href="/blog/2023/videos/"}},{id:"post-displaying-beautiful-tables-with-bootstrap-tables",title:"displaying beautiful tables with Bootstrap Tables",description:"an example of how to use Bootstrap Tables",section:"Posts",handler:()=>{window.location.href="/blog/2023/tables/"}},{id:"post-a-post-with-table-of-contents",title:"a post with table of contents",description:"an example of a blog post with table of contents",section:"Posts",handler:()=>{window.location.href="/blog/2023/table-of-contents/"}},{id:"post-a-post-with-giscus-comments",title:"a post with giscus comments",description:"an example of a blog post with giscus comments",section:"Posts",handler:()=>{window.location.href="/blog/2022/giscus-comments/"}},{id:"post-a-post-with-redirect",title:"a post with redirect",description:"you can also redirect to assets like pdf",section:"Posts",handler:()=>{window.location.href="/assets/pdf/example_pdf.pdf"}},{id:"post-a-post-with-diagrams",title:"a post with diagrams",description:"an example of a blog post with diagrams",section:"Posts",handler:()=>{window.location.href="/blog/2021/diagrams/"}},{id:"post-a-distill-style-blog-post",title:"a distill-style blog post",description:"an example of a distill-style blog post and main elements",section:"Posts",handler:()=>{window.location.href="/blog/2021/distill/"}},{id:"post-a-post-with-twitter",title:"a post with twitter",description:"an example of a blog post with twitter",section:"Posts",handler:()=>{window.location.href="/blog/2020/twitter/"}},{id:"post-a-post-with-disqus-comments",title:"a post with disqus comments",description:"an example of a blog post with disqus comments",section:"Posts",handler:()=>{window.location.href="/blog/2015/disqus-comments/"}},{id:"post-a-post-with-math",title:"a post with math",description:"an example of a blog post with some math",section:"Posts",handler:()=>{window.location.href="/blog/2015/math/"}},{id:"post-a-post-with-code",title:"a post with code",description:"an example of a blog post with some code",section:"Posts",handler:()=>{window.location.href="/blog/2015/code/"}},{id:"post-a-post-with-images",title:"a post with images",description:"this is what included images could look like",section:"Posts",handler:()=>{window.location.href="/blog/2015/images/"}},{id:"post-a-post-with-formatting-and-links",title:"a post with formatting and links",description:"march & april, looking forward to summer",section:"Posts",handler:()=>{window.location.href="/blog/2015/formatting-and-links/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"projects-project-1",title:"project 1",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/1_project/"}},{id:"projects-project-2",title:"project 2",description:"a project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/2_project/"}},{id:"projects-project-3-with-very-long-name",title:"project 3 with very long name",description:"a project that redirects to another website",section:"Projects",handler:()=>{window.location.href="/projects/3_project/"}},{id:"projects-project-4",title:"project 4",description:"another without an image",section:"Projects",handler:()=>{window.location.href="/projects/4_project/"}},{id:"projects-project-5",title:"project 5",description:"a project with a background image",section:"Projects",handler:()=>{window.location.href="/projects/5_project/"}},{id:"projects-project-6",title:"project 6",description:"a project with no image",section:"Projects",handler:()=>{window.location.href="/projects/6_project/"}},{id:"projects-project-7",title:"project 7",description:"with background image",section:"Projects",handler:()=>{window.location.href="/projects/7_project/"}},{id:"projects-project-8",title:"project 8",description:"an other project with a background image and giscus comments",section:"Projects",handler:()=>{window.location.href="/projects/8_project/"}},{id:"projects-project-9",title:"project 9",description:"another project with an image \ud83c\udf89",section:"Projects",handler:()=>{window.location.href="/projects/9_project/"}},{id:"projects-beers-case-study",title:"Beers Case Study",description:"An open-ended case study",section:"Projects",handler:()=>{window.location.href="/projects/Beers/"}},{id:"projects-clustering-mnist",title:"Clustering - MNIST",description:"Applying clustering techniques for image recognition",section:"Projects",handler:()=>{window.location.href="/projects/Clustering/"}},{id:"projects-employment-data-case-study",title:"Employment Data Case Study",description:"Business analysis with statistical inference",section:"Projects",handler:()=>{window.location.href="/projects/Employment/"}},{id:"projects-advent-of-code",title:"Advent of Code",description:"Problem solving with Python",section:"Projects",handler:()=>{window.location.href="/projects/advent-of-code/"}},{id:"projects-pytorch-on-hpc",title:"Pytorch on HPC",description:"Presentation on using Pytorch on the HPC cluster",section:"Projects",handler:()=>{window.location.href="/projects/hpc/"}},{id:"projects-practical-python",title:"Practical Python",description:"Programming fundamentals",section:"Projects",handler:()=>{window.location.href="/projects/practical-python/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%73%61%67%65%72.%6E%69%63%6B@%70%72%6F%74%6F%6E.%6D%65","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/NickSager","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/nicholas-sager","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>